<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="Content-Type">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cpptcl : C++/Tcl, a library that allows to easily integrate C++ and Tcl.">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <title>Cpptcl</title>
  </head>
  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
      <header class="inner"> <a id="forkme_banner" href="https://github.com/wsong83/cpptcl">View
          on GitHub</a>
        <h1 id="project_title">Cpptcl</h1>
        <h2 id="project_tagline">C++/Tcl&#8212;&#8212;&#36741;&#21161;&#23454;&#29616;&#23884;&#20837;&#24335;Tcl&#35299;&#37322;&#22120;&#30340;C++&#25509;&#21475;&#24211;</h2>
        <h3 id="project_tagline" align="right"><a href="freefun.html">English</a>
          &#20013;&#25991;</h3>
        <section id="downloads"> <a class="zip_download_link" href="https://github.com/wsong83/cpptcl/zipball/master">Download
            this project as a .zip file</a> <a class="tar_download_link" href="https://github.com/wsong83/cpptcl/tarball/master">Download
            this project as a tar.gz file</a> </section>
      </header>
    </div>
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner"> [<a href="quickstart.cn.html">&#19978;&#19968;&#39029;</a>]
        [<a href="index.cn.html">&#39030;&#23618;</a>] [<a href="vlasses.cn.html">&#19979;&#19968;&#39029;</a>]
      <h4>&#25193;&#23637;&#33258;&#30001;&#20989;&#25968;
    </h4>
&#19978;&#39029;&#30340;&#20363;&#23376;&#24050;&#32463;&#31616;&#21333;&#26174;&#31034;&#20102;&#22914;&#20309;&#22312;Tcl&#35299;&#37322;&#22120;&#20013;&#28155;&#21152;&#19968;&#20010;&#30001;C++&#20989;&#25968;&#23454;&#29616;&#30340;&#26032;&#21629;&#20196;&#12290;<br>
&#26080;&#35770;&#20197;&#20160;&#20040;&#26041;&#24335;&#20351;&#29992;Tcl&#35299;&#37322;&#22120;&#65288;&#27169;&#22359;&#25110;&#23884;&#20837;&#24335;&#65289;&#65292;&#20026;Tcl&#25193;&#23637;&#21629;&#20196;&#30340;&#26041;&#27861;&#37117;&#26159;&#19968;&#26679;&#30340;&#65306;<br>
    <br>
    <pre><code>i.def("tcl_function_name", cpp_function_name);
</code></pre><br>
    &#160;
    &#20854;&#20013;<code>i</code>&#26159;Tcl&#35299;&#37322;&#22120;&#23545;&#35937;&#65292;
    &#23383;&#31526;&#20018;<code>"tcl_function_name"</code>&#23450;&#20041;&#20102;&#26032;&#21629;&#20196;&#22312;Tcl&#35299;&#37322;&#20854;&#20013;&#30340;&#21629;&#20196;&#21517;&#65292;&#20989;&#25968;&#21517;
    <code>cpp_function_name()</code>
&#21017;&#21578;&#35785;&#20102;Tcl&#35299;&#37322;&#22120;&#26032;&#21629;&#20196;&#22312;C++&#31243;&#24207;&#20013;&#30340;&#23545;&#24212;&#25191;&#34892;&#20989;&#25968;&#12290;<br>
Tcl&#21629;&#20196;&#21517;&#21644;&#20854;&#23545;&#24212;&#30340;C++&#20989;&#25968;&#21517;&#19981;&#38656;&#35201;&#19968;&#26679;&#65292;C++/Tcl&#35299;&#37322;&#22120;&#23545;&#35937;&#20250;&#33258;&#21160;&#35760;&#24405;&#23427;&#20204;&#30340;&#23545;&#24212;&#20851;&#31995;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#26102;&#20505;&#21462;&#30456;&#21516;&#30340;&#21517;&#23383;&#26377;&#21161;&#20110;&#31243;&#24207;&#30340;&#21487;&#35835;&#24615;&#65292;&#27491;&#22914;&#19978;&#39029;&#20013;&#30340;&#20363;&#23376;&#65306;<br>
    <br>
    <pre><code>i.def("hello", hello);
</code></pre><br>
&#20107;&#23454;&#19978;&#65292;&#20219;&#20309;&#31526;&#21512;Tcl&#21629;&#20196;&#21517;&#35268;&#23450;&#30340;&#21517;&#23383;&#37117;&#21487;&#20316;&#20026;<code>def()</code>&#20989;&#25968;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#12290;<br>
&#27604;&#22914;&#35828;&#65292;&#25105;&#20204;&#38656;&#35201;&#23558;&#19979;&#38754;&#30340;C++&#20989;&#25968;&#25193;&#23637;&#25104;Tcl&#21629;&#20196;&#12290;<br>
    <br>
    <pre><code>int sum(int a, int b) {
  return a + b;
}
</code></pre><br>
&#25105;&#20204;&#21487;&#20197;&#36825;&#26679;&#23450;&#20041;&#26032;Tcl&#21629;&#20196;&#65306;<br>
    <br>
    <pre><code>i.def("sum", sum);
i.def("+", sum);
</code></pre><br>
&#23450;&#20041;&#23436;&#25104;&#21518;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;Tcl&#35299;&#37322;&#22120;&#20013;&#29992;&#22914;&#19979;&#30340;&#26041;&#24335;&#35843;&#29992;C++&#31243;&#24207;&#20013;&#30340;<code>sum()</code>
    &#20989;&#25968;&#65306;<br>
    <br>
    <pre><code>add 3 4
</code></pre><br>
&#25110;&#32773;&#65288;&#21518;&#24207;&#34920;&#36798;&#24335;&#65289;&#65306;<br>
    <br>
    <pre><code>+ 3 4
</code></pre><br>
&#27491;&#22914;&#20320;&#30475;&#21040;&#30340;&#65292;&#20320;&#21487;&#20197;&#29992;&#21516;&#19968;&#20010;C++&#20989;&#25968;&#23450;&#20041;&#22810;&#20010;&#19981;&#21516;&#30340;Tcl&#21629;&#20196;&#12290;<br>
&#22914;&#26524;&#21516;&#19968;&#20010;Tcl&#21629;&#20196;&#34987;&#23450;&#20041;&#22810;&#27425;&#65292;&#26368;&#21518;&#19968;&#27425;&#23450;&#20041;&#30340;C++&#20989;&#25968;&#23558;&#35206;&#30422;&#21069;&#38754;&#30340;&#23450;&#20041;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;&#35813;&#26041;&#24335;&#35206;&#30422;Tcl&#21407;&#26377;&#21629;&#20196;&#30340;&#40664;&#35748;&#23450;&#20041;&#12290;<br>
    <br>
&#24403;&#28982;&#65292;&#34987;&#25193;&#23637;&#30340;&#21629;&#20196;&#21487;&#20197;&#26377;&#36755;&#20837;&#21442;&#25968;&#21644;&#36820;&#22238;&#20540;&#12290;<br>
&#24403;&#20989;&#25968;&#30340;&#36755;&#20837;&#21442;&#25968;&#25968;&#37327;&#23567;&#20110;&#31561;&#20110;9&#20010;&#65292;&#24182;&#19988;&#25152;&#26377;&#30340;&#21442;&#25968;&#31867;&#22411;&#65288;&#21253;&#25324;&#36820;&#22238;&#20540;&#31867;&#22411;&#65289;&#20026;&#22914;&#19979;&#31867;&#22411;&#26102;&#65292;C++/Tcl&#23558;&#33258;&#21160;&#22788;&#29702;&#20989;&#25968;&#30340;&#21442;&#25968;&#19982;&#36820;&#22238;&#20540;&#23450;&#20041;&#12290;<br>
&#24403;&#21069;C++/Tcl&#24211;&#21487;&#20197;&#33258;&#21160;&#22788;&#29702;&#30340;&#21442;&#25968;&#25110;&#36820;&#22238;&#20540;&#31867;&#22411;&#21253;&#25324;&#20197;&#19979;&#20960;&#31181;&#65306;
  <ul>
    <li>std::string, char const * </li>
  <li>int,</li>
  <li>long,</li>
  <li>bool,</li>
  <li>double,</li>
  <li>pointer to arbitrary type</li>
  <li><a href="objects.cn.html">object</a> </li>
</ul>
&#20854;&#20013;<code>object</code>&#20026;Tcl&#25968;&#25454;&#23545;&#35937;&#65292;&#21487;&#20316;&#20026;&#19975;&#33021;&#31867;&#22411;&#20351;&#29992;&#65288;&#29992;&#20197;&#25903;&#25345;&#38750;&#20197;&#19978;&#31867;&#22411;&#30340;&#22797;&#26434;&#31867;&#22411;&#65289;&#12290;<br>
&#27492;&#22806;&#65292;&#21442;&#25968;&#30340;&#31867;&#22411;&#23450;&#20041;&#21487;&#20026;&#25335;&#36125;&#31867;&#22411;&#65288;&#31867;&#22411;&#26412;&#36523;&#65289;&#25110;&#32773;&#24120;&#25968;&#24341;&#29992;&#31867;&#22411;&#65288;<code>T
  const &amp;</code>&#65292;&#20854;&#20013;<code>T</code>&#20026;&#31867;&#22411;&#65289;&#65292;C++/Tcl&#24211;&#21487;&#20197;&#33258;&#21160;&#22788;&#29702;&#12290;<br>
&#20063;&#23601;&#26159;&#35828;&#65292;&#34987;&#25193;&#23637;&#30340;&#21629;&#20196;&#21482;&#26377;&#36755;&#20837;&#22411;&#21442;&#25968;&#65288;&#20989;&#25968;&#19981;&#33021;&#30452;&#25509;&#25913;&#21464;&#22806;&#37096;&#25968;&#25454;&#65289;&#12290;<br>
<br>
Starting from version 1.1.4, the last argument of the C++ function can be used
to pass an environment data (currently it must be a pointer) to the function,
which is realized by using the ClientData field of the Tcl APIs. The following
example shows the usage of this extra argument: <br>
<br>
<pre><code>// example test7.cc

#include "cpptcl.h"

static int gdata = 2;        // a global data

void fun(int d, <span style="font-weight: bold;">int * gd</span>) {  // gd comes from environment
  *gd += d;
}

int main() {
  interpreter i;
  
  i.def("fun", fun, <span style="font-weight: bold;">&amp;gdata</span>); // send gdata to the Tcl fun
  
  i.eval("fun 10");          // only one argument is passed by Tcl command
  assert(gdata == 12);       // check the global data is changed

  return 1;
}
</code></pre><br>
For variadic functions, the generic <code>object</code> type should be the
second last argument if the last one is used for environment data. Such as:<br>
<br>
<pre><code>// a function with 3 typed arguments, one variadic object and one environment data
double fun(int d1, long d2, std::string d3, <span style="font-weight: bold;">const object&amp; var_arg</span>, <span
style="font-weight: bold;">void * any_pointer</span>);
</code></pre> </section>
</div>
<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
  <footer class="inner">
    <p class="copyright">Cpptcl &#24403;&#21069;&#32500;&#25252;&#32773; <a href="https://github.com/wsong83">wsong83</a></p>
    <p>Copyright &#169; 2012, &#23435;&#23041;; Copyright &#169; 2004-2006,
      Maciej Sobczak</p>
  </footer>
</div>
</body>
</html>
